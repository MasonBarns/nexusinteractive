<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav>
    <img src="/logo.png" alt="Miami RP Logo" class="logo">
    <ul>
      <li><a href="index.html">Home</a></li>
    </ul>
  </nav>

  <header>
    <h1>Admin Panel</h1>

    <div id="auth-section">
      <input type="password" id="admin-password" placeholder="Enter admin password">
      <button onclick="authenticate()">Unlock Panel</button>
      <p id="auth-error" class="error"></p>
    </div>

    <form id="adminForm" style="display:none;">
      <label>Server Online:
        <input type="checkbox" id="online">
      </label><br><br>

      <label>Current Players:
        <input type="number" id="players">
      </label><br><br>

      <label>Maintenance Mode:
        <input type="checkbox" id="maintenance">
      </label><br><br>

      <label>Homepage Title:
        <input type="text" id="title">
      </label><br><br>

      <label>Homepage Tagline:
        <input type="text" id="tagline">
      </label><br><br>

      <label>Homepage Description:
        <textarea id="description" rows="4" cols="50"></textarea>
      </label><br><br>

      <button type="submit" class="btn primary">Update Site</button>
    </form>
  </header>

  <script>
    const ADMIN_PASSWORD = '7736635722';

    function authenticate() {
      const input = document.getElementById('admin-password').value;
      if (input === ADMIN_PASSWORD) {
        document.getElementById('auth-section').style.display = 'none';
        document.getElementById('adminForm').style.display = 'block';
      } else {
        document.getElementById('auth-error').textContent = 'Incorrect password.';
      }
    }

    document.getElementById('adminForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const res = await fetch('/api/update-status', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          password: ADMIN_PASSWORD,
          online: document.getElementById('online').checked,
          currentPlayers: document.getElementById('players').value,
          maintenance: document.getElementById('maintenance').checked,
          title: document.getElementById('title').value,
          tagline: document.getElementById('tagline').value,
          description: document.getElementById('description').value
        })
      });

      if (res.ok) {
        alert('Site updated!');
      } else {
        alert('Failed to update.');
      }
    });
  </script>
</body>
</html>
